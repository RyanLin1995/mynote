# 按行截取信息：grep
### 基本用法：`grep [-acinv] [--color=auto] 搜索字符串 文件名`

|选项与参数|说明|
|-|-|
|-a|将二进制(binary)文件以 text 文件的方式进行搜寻数据|
|-c|仅显示搜寻结果的行号|
|-i|忽略大小写|
|-n|显示行号|
|-v|反向选择，即只显示与关键字无关的内容|
|--color=auto|自动高亮找到的关键字|

例子：
1. 找到 last 中的非 reboot 用户：`last | grep -v reboot`
2. 找到 /etc/passwd 中的 nologin 用户：`grep nologin /etc/passwd`

### 进阶用法：`grep -[AB] 搜寻字符串 文件名`

|选项与参数|说明|
|-|-|
|-A|后面接数字，为 after 的意思。即除了显示该行外，还显示后面 n 行|
|-B|后面接数字，为 before 的意思。即除了显示该行外，还显示前面 n 行|

例子：
通过 dmesg 命令获取核心信息后，搜寻关键字为 x86 的并显示结果的前5行跟后5行：`dmesg | grep -B 5 -A 5 x86/fpu`

# 正则表达式(Regular Expression)
正则表达式就是处理字符串的方法，以行为单位来进行字符串的处理行为， 正则表达式透过一些特殊符号的辅助，可以让使用者轻易的达到搜寻/删除/取代某特定字符串的处理程序

正则表达式基本上是一种表达式，只要程序支持这种表达式，那么该程序就可以用来作为正则表达式的字符串处理之用，例如 vi, grep, awk ,sed 等程序

使用正则表达式时，需要特别留意当时环境的语系(locale)，否则可能会发现与别人不相同的结果

## 基础正则表达式(以 grep 为例)
一些用于正则表达式的特殊符号
|特殊符号|意义|
|-|-|
|[:alnum:]|代表英文大小写字符及数字，亦即 0-9, A-Z, a-z|
|[:alpha:]|代表任何英文大小写字符，亦即 A-Z, a-z|
|[:blank:]|代表空格键与 [Tab] 按键两者|
|[:cntrl:]|代表键盘上面的控制按键，亦即包括 CR, LF, Tab, Del..等等|
|[:digit:]|代表数字而已，亦即 0-9|
|[:graph:]|除了空格符 (空格键与 [Tab] 按键) 外的其他所有按键|
|[:lower:]|代表小写字符，亦即 a-z|
|[:print:]|代表任何可以被打印出来的字符|
|[:punct:]|代表标点符号 (punctuation symbol)，亦即：" ' ? ! ; : # $...|
|[:upper:]|代表大写字符，亦即 A-Z|
|[:space:]|任何会产生空白的字符，包括空格键, [Tab], CR 等等|
|[:xdigit:]|代表 16 进位的数字类型，因此包括： 0-9, A-F, a-f 的数字与字符|

### 基础正则表达式练习
练习前先注意，语系设置如下：
`LANG=C; export LC_ALL=C`

#### 一、特定字符串搜寻
1. 搜寻特定字符串 "the" ：`grep the 文件名`

2. 反向搜寻特定字符串 "the" ：`grep -v the 文件名`

3. 搜寻特定字符串 "the" 且忽略大小写功能：`grep -i the 文件名`

#### 二、利用[]对搜寻进行分类
1. 搜寻关键字 "test" 跟 "taste"：`grep t[ae]st 文件名` 
([] 里面无论有几个字符，匹配搜寻结果是仅匹配其中一个字符)

2. 搜寻字符中带有 "oo" 的字符：`grep oo 文件名`

3. 搜寻字符中带有 "oo" 的字符但是不能以 "g" 开头：`grep [^g]oo 文件名`

4. 搜寻字符中带有 "oo" 的字符但是不能以小写字母开头：`grep [^a-z]oo 文件名` 或 `grep [^[:lower:]]oo 文件名`

5. 搜寻带有数字的字符